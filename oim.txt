package com.test.rest;

import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;

public class RestAdapter {

public static void main(String[] args) {
RestAdapter adp=new RestAdapter();
HashMap<String,String> itResMap=new HashMap<String,String>();
itResMap.put("username", "Put user name here");
itResMap.put("password", "Put password here");
adp.pushUserLoginInSAP("User Login","Employee Number",itResMap);

}

public String pushUserLoginInSAP(String userLogin, String employeeNumber,
HashMap<String,String> itResMap) {
String response = "FAILED";
HttpURLConnection rc = null;
String serviceURL = itResMap.get("WebService URL") + "/" + employeeNumber + "/"
+ userLogin;
int len = serviceURL.length();
URL url;
try {
byte[] message = (itResMap.get("username")+":"+itResMap.get("password")).getBytes("UTF-8");
String encoded = javax.xml.bind.DatatypeConverter.printBase64Binary(message);
url = new URL(serviceURL);
rc = (HttpURLConnection) url.openConnection();
rc.setRequestMethod("POST");
rc.addRequestProperty("Authorization", "Basic "+encoded);
rc.setDoOutput(true);

rc.connect();
OutputStreamWriter out = new OutputStreamWriter(
rc.getOutputStream());
out.write(serviceURL, 0, len);
out.flush();
System.out.println("Request sent, reading response ");
InputStreamReader read = new InputStreamReader(rc.getInputStream());
StringBuilder sb = new StringBuilder();
int ch = read.read();
while (ch != -1) {
sb.append((char) ch);
ch = read.read();
}
response = sb.toString();
System.out.println("Response:"+response);
read.close();
rc.disconnect();
} catch (Exception e) {
System.out.println(e.getMessage());
}

return response;

}

}
